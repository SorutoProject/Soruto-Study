<html><head><title>Soruto Study 問題作成ツール</title><meta charset="utf-8">
  <script src="../js/soruto_ejb-min.js"></script>
<script>
function add(){
var mode = so.getVal("mode");
var now = so.getVal("list");
var qu = so.getVal("question");
var a1 = so.getVal("a1");
var a2 = so.getVal("a2");
var a3 = so.getVal("a3");
var a4 = so.getVal("a4");
var ansnum = so.getVal("ans");
//1行目のとき
if(now == ""){
  if(mode=="c2"){
  so.setVal("list",now + mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + ansnum);
  }
  else if(mode=="c3"){
  so.setVal("list",now +  mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + a3 + "|" + ansnum);
  }
  else if(mode=="c4"){
  so.setVal("list",now + mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + a3 + "|" + a4 + "|" + ansnum);
  }
}
//それ以外
else{
  if(mode=="c2"){
  so.setVal("list",now + "\n" + mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + ansnum);
  }
  else if(mode=="c3"){
  so.setVal("list",now + "\n" + mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + a3 + "|" + ansnum);
  }
  else if(mode=="c4"){
  so.setVal("list",now + "\n" + mode + "|" + qu + "|" + a1 + "|" + a2 + "|" + a3 + "|" + a4 + "|" + ansnum);
  }
}
//テキストボックスのクリア
so.setVal("a1","");
so.setVal("a2","");
so.setVal("a3","");
so.setVal("a4","");
so.setVal("question","");

}
//ダウンロード
function dfile(aid){
	var content = so.getVal("list");
	var mfname = so.getVal("filename");
	var fname = so.getVal("filename") + ".txt";
	var linkid = so.getId(aid);//「保存」リンクのエレメント取得
	if(mfname === "" | mfname === undefined || mfname===null){
		linkid.href = "#";
		so.modal.al("情報","リストIDの入力がないため、<br>保存処理をキャンセルしました。");
	}else{
	//以下、http://furudate.hatenablog.com/entry/2014/06/02/172923を参考にしました
	var data = new Blob([content], {"type" : "application/x-msdownload"});
	window.URL = window.URL || window.webkitURL;
	linkid.href = window.URL.createObjectURL(data);
	linkid.download = fname;
	so.modal.ms("保存","間もなくダウンロードが開始されます。");
	so.modal.cTime(2500);
	}
}
</script>
</head>
	<body><style>textarea{width:100%;height:137px;}</style>
<p><b>Soruto Study 問題作成ツール</b></p>
<p>問題の種類:
<select size="1" id="mode">
<option value="c2">2択問題</option>
<option value="c3">3択問題</option>
<option value="c4">4択問題</option>
</select>
</p>
  <p>問題:<input type="text" id="question"></p>
<p>選択肢1:<input type="text" id="a1"><br>
選択肢2:<input type="text" id="a2"><br>
選択肢3:<input type="text" id="a3"><br>
選択肢4:<input type="text" id="a4"></p>
<p>正解の選択肢:<select size="1" id="ans">
<option value="1">選択肢1</option>
<option value="2">選択肢2</option>
<option value="3">選択肢3</option>
<option value="4">選択肢4</option>
</select></p>
  <p><input type="button" onclick="add();" value="追加"></p>
  <p>List<br><textarea id="list"></textarea></p><p>リストID:<input type="text" id="filename"><br>
   <a href="#" id="slink" onclick="dfile('slink');">保存(ダウンロード)</a></p>
  <div id="so-modal"></div>
  </body></html>
